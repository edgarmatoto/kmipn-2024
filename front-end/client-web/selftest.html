<!DOCTYPE html>
<html lang="zxx">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="x-ua-compatible" content="ie=edge" />
  <title>SinergiMental</title>
  <meta name="description" content="" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="manifest" href="site.webmanifest" />
  <link rel="shortcut icon" type="image/x-icon" href="assets/img/logo/logo.png" />

  <!-- CSS here -->
  <link rel="stylesheet" href="assets/css/bootstrap.min.css" />
  <link rel="stylesheet" href="assets/css/owl.carousel.min.css" />
  <link rel="stylesheet" href="assets/css/ticker-style.css" />
  <link rel="stylesheet" href="assets/css/flaticon.css" />
  <link rel="stylesheet" href="assets/css/slicknav.css" />
  <link rel="stylesheet" href="assets/css/animate.min.css" />
  <link rel="stylesheet" href="assets/css/magnific-popup.css" />
  <link rel="stylesheet" href="assets/css/fontawesome-all.min.css" />
  <link rel="stylesheet" href="assets/css/themify-icons.css" />
  <link rel="stylesheet" href="assets/css/slick.css" />
  <link rel="stylesheet" href="assets/css/nice-select.css" />
  <link rel="stylesheet" href="assets/css/style.css" />
  <style>
    body {
      background-color: #f8f9fa;
    }
    .survey-container {
      background-color: #ffffff;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
    }
    .survey-header {
      text-align: center;
      margin-bottom: 30px;
    }
    .custom-radio .custom-control-input:checked ~ .custom-control-label::before {
      background-color: #007bff;
    }
    .pagination-buttons {
      display: flex;
      justify-content: space-between;
      margin-top: 20px;
    }
  </style>
</head>

<body>
  <header>
    <!-- Header Start -->
    <div class="header-area">
      <div class="main-header">
        <div class="header-mid d-none d-md-block">
          <div class="container">
            <div class="row d-flex align-items-center">
              <!-- Logo -->
              <div class="col-xl-3 col-lg-3 col-md-3 d-flex align-items-center">
                <div class="logo">
                  <a href="index.html">
                    <img src="assets/img/logo/logo.png" alt="" width="70px" />
                  </a>
                </div>
                <div class="ml-2">
                  <span class="h4 font-weight-bold">SinergiMental</span>
                </div>
              </div>
              <div class="col-xl-9 col-lg-9 col-md-9">
              </div>
            </div>
          </div>
        </div>
        <div class="header-bottom header-sticky">
          <div class="container">
            <div class="row align-items-center">
              <div class="col-xl-10 col-lg-10 col-md-12 header-flex">
                <!-- sticky -->
                <div class="sticky-logo d-flex align-items-center">
                  <a href="index.html">
                    <img src="assets/img/logo/logo.png" alt="" width="70px" />
                  </a>
                  <span class="ml-2 h4 font-weight-bold">SinergiMental</span>
                </div>
                <!-- Main-menu -->
                <div class="main-menu d-none d-md-block">
                  <nav>
                    <ul id="navigation">
                      <li><a href="index.html">Home</a></li>
                      <li><a href="about.html">Tentang Kami</a></li>
                      <li><a href="artikel.html">Artikel</a></li>
                      <li><a href="selftest.html">Test Kesehatan Mental</a></li>
                      <li><a href="contact.html">Kontak</a></li>
                    </ul>
                  </nav>
                </div>
              </div>
              <!-- Mobile Menu -->
              <div class="col-12">
                <div class="mobile_menu d-block d-md-none"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Header End -->
  </header>

  <!-- Survey Form Start -->
  <div class="container mt-5">
    <form id="surveyForm">
      <div class="form-group">
        <label for="name">Nama</label>
        <input type="text" class="form-control" id="name" name="name" placeholder="Masukkan nama Anda" required>
      </div>
      <div class="form-group">
        <label for="whatsapp">Nomor WhatsApp</label>
        <input type="text" class="form-control" id="whatsapp" name="whatsapp" placeholder="Awali dengan 62, contoh: 6281234567890" required>
      </div>

      <div class="survey-container">
        <h2 class="survey-header">Survey Form</h2>
        
        <!-- Survey Pages -->
        <div id="page1" class="survey-page">
          <!-- Questions 1-20 -->
        </div>

        <div id="page2" class="survey-page" style="display:none;">
          <!-- Questions 20-40 -->
        </div>
        <!-- Add more pages if needed -->

        <!-- Pagination Buttons -->
        <div class="pagination-buttons">
          <button type="button" class="btn btn-secondary" id="prevBtn" onclick="changePage(-1)" style="display:none;">Previous</button>
          <button type="button" class="btn btn-primary" id="nextBtn" onclick="changePage(1)">Next</button>
          <button type="submit" class="btn btn-success" id="submitBtn" style="display:none;">Submit</button>
        </div>
      </div>
    </form>
  </div>
  <!-- Survey Form End -->

  <br />
  <br />
  <br />

  <footer>
    <!-- Footer Start-->
    <div class="footer-area footer-padding fix">
      <div class="container">
        <div class="row d-flex justify-content-between">
          <div class="col-xl-4 col-lg-4 col-md-7 col-sm-12">
            <div class="single-footer-caption mt-60">
              <div class="footer-title">
                <h4 style="color: white;">SinergiMental</h4>
                <div class="footer-pera">
                  <p>
                    SinergiMental adalah platform yang didedikasikan untuk kesehatan mental Anda. Kami menyediakan sumber daya, dukungan, dan informasi untuk membantu Anda dalam perjalanan kesehatan mental Anda. Dengan berbagai artikel, tes, dan panduan, SinergiMental hadir untuk menjadi teman setia dalam menjaga kesehatan jiwa Anda.
                  </p>
                </div>
              </div>
            </div>
          </div>
  
          <div class="col-xl-4 col-lg-4 col-md-7 col-sm-12">
            <div class="single-footer-caption mt-60 d-flex justify-content-center">
              <div class="footer-title">
                <h4 style="color: white;">Kontak</h4>
                <div class="footer-pera">
                  <p>
                    <i class="fas fa-map-marker-alt"></i> Makassar, Sulawesi Selatan<br>
                    <i class="fas fa-phone-alt"></i> +6289502743924<br>
                    <i class="fas fa-envelope"></i> sinergimental@gmail.com
                  </p>
                </div>
              </div>
            </div>
          </div>
          
          <div class="col-xl-4 col-lg-4 col-md-7 col-sm-12">
            <div class="single-footer-caption mt-60">
              <div class="footer-title">
                <h4 style="color: white;">Link Pintasan</h4>
                <div class="footer-pera">
                  <ul class="footer-links">
                    <li><a href="about.html">Tentang Kami</a></li>
                    <li><a href="artikel.html">Artikel</a></li>
                    <li><a href="selftest.html">Tes Kesehatan Mental</a></li>
                    <li><a href="contact.html">Kontak</a></li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
          
        </div>
      </div>
    </div>
  
    <!-- footer-bottom area -->
    <div class="footer-bottom-area">
      <div class="container">
        <div class="footer-border">
          <div class="row d-flex align-items-center justify-content-between">
            <div class="col-lg-6">
              <div class="footer-copy-right">
                <p>
                  Copyright &copy;
                  <script>
                    document.write(new Date().getFullYear());
                  </script>
                  All rights reserved | Sigma Male
                </p>
              </div>
            </div>
            <div class="col-lg-6">
              <div class="footer-menu f-right">
                <ul>
                  <li><a href="selftest.html">Tes Kesehatan Mental</a></li>
                  <li><a href="contact.html">Kontak</a></li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Footer End-->
  </footer>
  
  <style>
    .footer-title h4 {
      color: white;
    }
  
    .footer-pera p {
      text-align: left;
    }
  
    .footer-social a {
      margin-right: 10px;
      color: white;
      font-size: 20px;
    }
  
    .footer-social a:hover {
      color: orange;
    }
  
    .footer-links {
      list-style: none;
      padding: 0;
    }
  
    .footer-links li {
      margin-bottom: 10px;
    }
  
    .footer-links a {
      color: white;
      text-decoration: none;
    }
  
    .footer-links a:hover {
      text-decoration: underline;
    }
  </style>

  <!-- JS here -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      fetchData();
    });

    function fetchData() {
      fetch('http://localhost:3000/api/test')
              .then(response => response.json())
              .then(res => {
                populateTable(res.data);
              })
              .catch(error => console.error('Error fetching data:', error));
    }

    function populateTable(data) {
        let surveyPage;

      data.forEach((item, index) => {
        if (index < 20) {
          surveyPage = document.getElementById('page1');
        } else {
          surveyPage = document.getElementById('page2');
        }
        // create question-options container
        const formGroupDiv = document.createElement('div');
        formGroupDiv.classList.add('form-group');

        // create label for question
        const questionLabel = document.createElement('label');
        questionLabel.textContent = `${index + 1}. ` + item.question;
        formGroupDiv.appendChild(questionLabel);

        for (let i = 0; i < 4; i++) {
          const options = ['a', 'b', 'c', 'd']

          // create option container
          const optionDiv = document.createElement('div');
          optionDiv.classList.add('custom-control', 'custom-radio')

          const optionInput = document.createElement('input');
          optionInput.setAttribute('type', 'radio');
          optionInput.setAttribute('id', 'option' + (index +1) + (i+1));
          optionInput.setAttribute('name', 'question' + (index+1));
          optionInput.setAttribute('value', `${i}`);
          optionInput.classList.add('custom-control-input');
          optionInput.required = true;
          optionDiv.appendChild(optionInput);

          const optionLabel = document.createElement('label');
          optionLabel.setAttribute('for', 'option' + (index+1) + (i+1));
          optionLabel.classList.add('custom-control-label');
          optionLabel.textContent = item[`option_` + options[i]];
          optionDiv.appendChild(optionLabel);

          formGroupDiv.appendChild(optionDiv);
        }

        surveyPage.appendChild(formGroupDiv)
      });
    }
  </script>

<!--  script to handle submit form-->
  <script>
    const form = document.getElementById('surveyForm');
    form.addEventListener('submit', onSubmit);

    function onSubmit(e) {
      e.preventDefault();

      const formData = new FormData(form);

      let data = {
        testScore: 0,
        name: "",
        whatsapp: "",
      };
      for (const [key, value] of formData.entries()) {
        if (key.startsWith('question')) {
          data.testScore += Number(value);
        } else if (key.startsWith('name')) {
          data.name = value;
        } else if (key.startsWith('whatsapp')) {
          data.whatsapp = value;
        }
      }

      // send API
      fetch('http://localhost:3000/api/ask', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(data)
      })
              .then(response => response.json())
              .then(result => {
                console.log('Success:', result);

                // Reload the page
                window.location.reload();
                // swal("Success!", "Data added successfully!", "success");
              })
              .catch(error => {
                console.error('Error:', error);
              });
    }
  </script>

  <!-- All JS Custom Plugins Link Here here -->
  <script src="./assets/js/vendor/modernizr-3.5.0.min.js"></script>
  <!-- Jquery, Popper, Bootstrap -->
  <script src="./assets/js/vendor/jquery-1.12.4.min.js"></script>
  <script src="./assets/js/popper.min.js"></script>
  <script src="./assets/js/bootstrap.min.js"></script>
  <!-- Jquery Mobile Menu -->
  <script src="./assets/js/jquery.slicknav.min.js"></script>

  <!-- Jquery Slick , Owl-Carousel Plugins -->
  <script src="./assets/js/owl.carousel.min.js"></script>
  <script src="./assets/js/slick.min.js"></script>
  <!-- Date Picker -->
  <script src="./assets/js/gijgo.min.js"></script>
  <!-- One Page, Animated-HeadLin -->
  <script src="./assets/js/wow.min.js"></script>
  <script src="./assets/js/animated.headline.js"></script>
  <script src="./assets/js/jquery.magnific-popup.js"></script>

  <!-- Breaking New Pluging -->
  <script src="./assets/js/jquery.ticker.js"></script>
  <script src="./assets/js/site.js"></script>

  <!-- Scrollup, nice-select, sticky -->
  <script src="./assets/js/jquery.scrollUp.min.js"></script>
  <script src="./assets/js/jquery.nice-select.min.js"></script>
  <script src="./assets/js/jquery.sticky.js"></script>

  <!-- contact js -->
  <script src="./assets/js/contact.js"></script>
  <script src="./assets/js/jquery.form.js"></script>
  <script src="./assets/js/jquery.validate.min.js"></script>
  <script src="./assets/js/mail-script.js"></script>
  <script src="./assets/js/jquery.ajaxchimp.min.js"></script>

  <!-- Jquery Plugins, main Jquery -->
  <script src="./assets/js/plugins.js"></script>
  <script src="./assets/js/main.js"></script>

  <script>
    let currentPage = 1;
    const totalPages = 2; // Adjust this number based on the total number of pages

    function showPage(page) {
      document.querySelector(`#page${currentPage}`).style.display = 'none';
      document.querySelector(`#page${page}`).style.display = 'block';
      currentPage = page;

      // Update buttons visibility
      document.getElementById('prevBtn').style.display = currentPage === 1 ? 'none' : 'inline-block';
      document.getElementById('nextBtn').style.display = currentPage === totalPages ? 'none' : 'inline-block';
      document.getElementById('submitBtn').style.display = currentPage === totalPages ? 'inline-block' : 'none';
    }

    function changePage(step) {
      const newPage = currentPage + step;
      if (newPage >= 1 && newPage <= totalPages) {
        showPage(newPage);
      }
    }

    // Initial page setup
    showPage(currentPage);
  </script>
</body>
</html>
